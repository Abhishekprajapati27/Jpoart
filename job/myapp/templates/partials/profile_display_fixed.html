{% load static %}

<div class="profile-header linkedin-header">
  <div class="row align-items-center">
    <!-- Left Side - Profile Information -->
    <div class="col-md-8">
      <div class="profile-info">
        <h1 class="profile-name">{{ job_seeker.user.first_name }} {{ job_seeker.user.last_name }}</h1>
        <p class="profile-email">{{ job_seeker.user.email }}</p>
        <p class="profile-location">{{ job_seeker.location|default:"Location not set" }}</p>
        <p class="profile-phone">{{ job_seeker.phone|default:"Phone not set" }}</p>
      </div>
    </div>

    <!-- Right Side - Profile Image -->
    <div class="col-md-4 text-center">
      <div class="profile-avatar">
        {% if job_seeker.profile_picture %}
          <img src="{{ job_seeker.profile_picture.url }}" alt="Profile Picture" class="avatar-img">
        {% else %}
          <div class="default-avatar">
            <svg width="120" height="120" viewBox="0 0 120 120" xmlns="http://www.w3.org/2000/svg">
              <circle cx="60" cy="60" r="60" fill="#0073b1"/>
              <circle cx="60" cy="45" r="20" fill="#ffffff"/>
              <path d="M30 95 Q30 75 60 75 Q90 75 90 95" fill="#ffffff"/>
            </svg>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<div class="profile-section linkedin-section">
  <h3 class="section-title">About</h3>
  <div class="section-content">
    {% if job_seeker.skills %}
      <div class="skills-container" id="skills-container">
        {{ job_seeker.skills|safe }}
      </div>
    {% else %}
      <p>No skills added yet.</p>
    {% endif %}
  </div>
</div>

<div class="profile-section linkedin-section">
  <h3 class="section-title">Experience</h3>
  <div class="section-content">
    <p>{{ job_seeker.experience|default:"No experience added yet."|linebreaks }}</p>
  </div>
</div>

<div class="profile-section linkedin-section">
  <h3 class="section-title">Education</h3>
  <div class="section-content">
    <p>{{ job_seeker.education|default:"No education added yet."|linebreaks }}</p>
  </div>
</div>

<div class="profile-section linkedin-section">
  <h3 class="section-title">Resume</h3>
  <div class="section-content">
    {% if job_seeker.resume %}
    <p>Current Resume: <a href="{{ job_seeker.resume.url }}" target="_blank">{{ job_seeker.resume.name }}</a></p>
    {% else %}
    <p>No resume uploaded yet.</p>
    {% endif %}
  </div>
</div>

<div class="profile-section linkedin-section">
  <h3 class="section-title">LinkedIn URL</h3>
  <div class="section-content">
    {% if job_seeker.linkedin_url %}
      <a href="{{ job_seeker.linkedin_url }}" target="_blank">{{ job_seeker.linkedin_url }}</a>
    {% else %}
      <p>Not provided.</p>
    {% endif %}
  </div>
</div>

<div class="profile-section linkedin-section">
  <h3 class="section-title">GitHub URL</h3>
  <div class="section-content">
    {% if job_seeker.github_url %}
      <a href="{{ job_seeker.github_url }}" target="_blank">{{ job_seeker.github_url }}</a>
    {% else %}
      <p>Not provided.</p>
    {% endif %}
  </div>
</div>

<style>
.default-avatar {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 4px solid #0073b1;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f8f9fa;
}

.default-avatar svg {
  width: 80px;
  height: 80px;
}

.skills-container {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 10px;
}

.skill-badge {
  background-color: #e7f3ff;
  color: #0073b1;
  padding: 4px 12px;
  border-radius: 16px;
  font-size: 0.875rem;
  font-weight: 500;
  border: 1px solid #0073b1;
  display: inline-block;
  white-space: nowrap;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const skillsContainer = document.getElementById('skills-container');
    if (skillsContainer) {
        const skillsText = skillsContainer.innerHTML.trim();
        if (skillsText) {
            // Split skills by comma, semicolon, or newline and create badges
            const skills = skillsText.split(/[,;\n]/).map(skill => skill.trim()).filter(skill => skill);
            skillsContainer.innerHTML = '';
            skills.forEach(skill => {
                const badge = document.createElement('span');
                badge.className = 'skill-badge';
                badge.textContent = skill;
                skillsContainer.appendChild(badge);
            });
        }
    }
});
</script>
